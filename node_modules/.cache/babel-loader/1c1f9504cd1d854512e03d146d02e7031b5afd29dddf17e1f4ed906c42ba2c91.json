{"ast":null,"code":"var _jsxFileName = \"/Users/hyunjunekim/Documents/GitHub/moment4u/src/pages/CreateDiaryPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\nimport '../styles/global.css';\nimport { useNavigate } from 'react-router-dom';\nimport StoryGrid from '../components/StoryGrid';\nimport DeleteConfirmModal from '../components/DeleteConfirmModal';\nimport SortDropdown from '../components/SortDropdown';\nimport { uploadImages, getAllStories, deleteStory, getImages, analyzeImagesSequentially, generateStory, createStory } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreateDiaryPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [showPopup, setShowPopup] = useState(false);\n  const [isFading, setIsFading] = useState(false);\n  const [stories, setStories] = useState([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadedImages, setUploadedImages] = useState([]);\n  const [combinedDescription, setCombinedDescription] = useState('');\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [isGeneratingStory, setIsGeneratingStory] = useState(false);\n  const [generatedStory, setGeneratedStory] = useState(null);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [showError, setShowError] = useState(false);\n  const fileInputRef = useRef(null);\n  const [isDeleteMode, setIsDeleteMode] = useState(false);\n  const [selectedStories, setSelectedStories] = useState(new Set());\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [sortBy, setSortBy] = useState('date-desc');\n  const [isLightMode, setIsLightMode] = useState(() => {\n    const savedMode = localStorage.getItem('isLightMode');\n    return savedMode ? JSON.parse(savedMode) : false;\n  });\n  const glitterContainer = useRef(null);\n  const sortOptions = [{\n    label: 'Newest',\n    value: 'date-desc'\n  }, {\n    label: 'Oldest',\n    value: 'date-asc'\n  }, {\n    label: 'A-Z',\n    value: 'title-asc'\n  }, {\n    label: 'Z-A',\n    value: 'title-desc'\n  }];\n  const sortedStories = useMemo(() => {\n    const sorted = [...stories];\n    switch (sortBy) {\n      case 'date-desc':\n        return sorted.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n      case 'date-asc':\n        return sorted.sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n      case 'title-asc':\n        return sorted.sort((a, b) => (a.title || '').localeCompare(b.title || ''));\n      case 'title-desc':\n        return sorted.sort((a, b) => (b.title || '').localeCompare(a.title || ''));\n      default:\n        return sorted;\n    }\n  }, [stories, sortBy]);\n  useEffect(() => {\n    fetchStories();\n    fetchImages();\n  }, []);\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  useEffect(() => {\n    const createSingleGlitter = () => {\n      var _glitterContainer$cur;\n      const glitter = document.createElement('div');\n      const size = Math.random() * 15 + 5;\n      const startX = Math.random() * window.innerWidth;\n      const duration = Math.random() * 3 + 2;\n      glitter.style.cssText = `\n        position: absolute;\n        width: ${size}px;\n        height: ${size}px;\n        background: ${isLightMode ? 'radial-gradient(circle at 30% 30%, #FFD700, #FFA500)' : 'radial-gradient(circle at 30% 30%, #FFB6C1, #87CEEB)'};\n        opacity: ${isLightMode ? '0.4' : '0.2'};\n        border-radius: 50%;\n        pointer-events: none;\n        bottom: -${size}px;\n        left: ${startX}px;\n        animation: glitterFloat ${duration}s linear;\n      `;\n      (_glitterContainer$cur = glitterContainer.current) === null || _glitterContainer$cur === void 0 ? void 0 : _glitterContainer$cur.appendChild(glitter);\n      glitter.addEventListener('animationend', () => {\n        glitter.remove();\n      });\n    };\n\n    // Create initial batch - reduced from 30 to 15\n    for (let i = 0; i < 15; i++) {\n      setTimeout(createSingleGlitter, Math.random() * 3000);\n    }\n\n    // Continuously create new glitters - reduced frequency from 300ms to 800ms\n    const interval = setInterval(() => {\n      createSingleGlitter();\n    }, 800);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [isLightMode]);\n  useEffect(() => {\n    localStorage.setItem('isLightMode', JSON.stringify(isLightMode));\n    document.body.style.backgroundColor = isLightMode ? '#faf4f7' : '#121212';\n  }, [isLightMode]);\n  useEffect(() => {\n    let errorTimer;\n    if (showError) {\n      errorTimer = setTimeout(() => {\n        setShowError(false);\n        setErrorMessage('');\n      }, 3000);\n    }\n    return () => {\n      clearTimeout(errorTimer);\n    };\n  }, [showError]);\n  const fetchStories = async () => {\n    try {\n      const fetchedStories = await getAllStories();\n      setStories(fetchedStories);\n    } catch (error) {\n      console.error('Failed to fetch stories:', error);\n    }\n  };\n  const fetchImages = async () => {\n    try {\n      const images = await getImages();\n      setUploadedImages(images);\n      console.log('Fetched images:', images);\n    } catch (error) {\n      console.error('Failed to fetch images:', error);\n    }\n  };\n  useEffect(() => {\n    let fadeTimer;\n    let hideTimer;\n    if (showPopup) {\n      // Start fade out after 1.7 seconds\n      fadeTimer = setTimeout(() => {\n        setIsFading(true);\n      }, 1700);\n\n      // Hide popup after fade out animation (2 seconds + 0.3 seconds for fade out)\n      hideTimer = setTimeout(() => {\n        setShowPopup(false);\n        setIsFading(false);\n      }, 2000);\n    }\n    return () => {\n      clearTimeout(fadeTimer);\n      clearTimeout(hideTimer);\n    };\n  }, [showPopup]);\n  const handleCreateStory = () => {\n    var _fileInputRef$current;\n    (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  };\n  const handleFileSelect = async event => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n    if (files.length > 4) {\n      setErrorMessage('You can only upload up to 4 images at once');\n      setShowError(true);\n      if (event.target) {\n        event.target.value = ''; // Reset file input\n      }\n      return;\n    }\n    try {\n      setIsUploading(true);\n      const uploadedImages = await uploadImages(Array.from(files));\n      console.log('Successfully uploaded images:', uploadedImages);\n      setUploadedImages(uploadedImages);\n\n      // Start analyzing images\n      setIsAnalyzing(true);\n      const description = await analyzeImagesSequentially(uploadedImages);\n      setCombinedDescription(description);\n      setIsAnalyzing(false);\n\n      // Generate story\n      setIsGeneratingStory(true);\n      const storyResult = await generateStory(description);\n      setGeneratedStory(storyResult);\n      setIsGeneratingStory(false);\n\n      // Save the story\n      if (storyResult.title && storyResult.story && uploadedImages.length > 0) {\n        const imageUrls = uploadedImages.map(img => img.image_path);\n        const storyId = uploadedImages[0].story_id;\n        await createStory(storyResult.title, storyResult.story, imageUrls, storyId);\n        console.log('Story saved successfully!');\n\n        // Refresh the stories list after successful creation\n        await fetchStories();\n      }\n    } catch (error) {\n      console.error('Failed to generate story:', error);\n      setErrorMessage('An error occurred while processing your images');\n      setShowError(true);\n    } finally {\n      setIsUploading(false);\n      if (event.target) {\n        event.target.value = ''; // Reset file input\n      }\n    }\n  };\n  const handleStorySelect = storyId => {\n    setSelectedStories(prev => {\n      const newSelected = new Set(prev);\n      if (newSelected.has(storyId)) {\n        newSelected.delete(storyId);\n      } else {\n        newSelected.add(storyId);\n      }\n      return newSelected;\n    });\n  };\n  const handleDeleteClick = async () => {\n    if (isDeleteMode) {\n      // If already in delete mode, check if there are stories to delete\n      if (selectedStories.size > 0) {\n        setShowDeleteConfirm(true);\n      } else {\n        // If no stories selected, just exit delete mode\n        setIsDeleteMode(false);\n      }\n    } else {\n      // Enter delete mode\n      setIsDeleteMode(true);\n      setSelectedStories(new Set());\n    }\n  };\n  const handleConfirmDelete = async () => {\n    try {\n      // Create an array to track failed deletions\n      const failedDeletions = [];\n\n      // Log the stories we're about to delete\n      console.log('Selected stories for deletion:', Array.from(selectedStories));\n      console.log('Current stories:', stories);\n\n      // Delete stories one by one to handle errors individually\n      for (const storyId of Array.from(selectedStories)) {\n        try {\n          console.log('Attempting to delete story with ID:', storyId);\n          await deleteStory(storyId);\n          console.log('Successfully deleted story from API:', storyId);\n\n          // Update stories list immediately after successful deletion\n          setStories(prev => {\n            console.log('Updating stories list after deletion. Current:', prev);\n            const updated = prev.filter(story => story.id !== storyId);\n            console.log('Updated stories list:', updated);\n            return updated;\n          });\n        } catch (error) {\n          console.error(`Failed to delete story ${storyId}:`, error);\n          failedDeletions.push(storyId);\n        }\n      }\n\n      // Show error message if any deletions failed\n      if (failedDeletions.length > 0) {\n        alert(`Failed to delete ${failedDeletions.length} stories. Please try again later.`);\n      }\n\n      // Refresh the stories list from the server\n      await fetchStories();\n    } catch (error) {\n      console.error('Error in delete operation:', error);\n      alert('An error occurred while deleting stories. Please try again.');\n    }\n\n    // Clear selected stories and exit delete mode\n    setSelectedStories(new Set());\n    setIsDeleteMode(false);\n    setShowDeleteConfirm(false);\n  };\n  const handleCancelDelete = () => {\n    setShowDeleteConfirm(false);\n  };\n  const isSmallScreen = windowWidth < 1100;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'relative',\n      minHeight: '100vh',\n      backgroundColor: isLightMode ? '#faf4f7' : '#121212',\n      transition: 'background-color 0.3s ease'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n          @keyframes glitterFloat {\n            0% {\n              transform: translateY(0) rotate(0deg);\n              opacity: ${isLightMode ? 0.4 : 0.2};\n            }\n            50% {\n              opacity: ${isLightMode ? 0.6 : 0.3};\n            }\n            100% {\n              transform: translateY(-${window.innerHeight}px) rotate(360deg);\n              opacity: 0;\n            }\n          }\n        `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: glitterContainer,\n      className: \"glitter-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setIsLightMode(prev => !prev),\n      style: {\n        position: 'absolute',\n        top: '20px',\n        right: '20px',\n        padding: '0.6em 1.2em',\n        fontSize: '0.9rem',\n        fontFamily: 'Poppins, sans-serif',\n        fontWeight: '500',\n        letterSpacing: '0.05em',\n        backgroundColor: isLightMode ? '#E68FAC' : 'transparent',\n        color: isLightMode ? 'white' : '#FFB6C1',\n        border: `2px solid ${isLightMode ? 'transparent' : '#FFB6C1'}`,\n        borderRadius: '50px',\n        cursor: 'pointer',\n        transition: 'all 0.3s ease',\n        zIndex: 1000,\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.5rem'\n      },\n      onMouseOver: e => {\n        e.currentTarget.style.transform = 'translateY(-2px)';\n        e.currentTarget.style.boxShadow = `0 5px 15px ${isLightMode ? 'rgba(230, 143, 172, 0.4)' : 'rgba(255, 182, 193, 0.2)'}`;\n      },\n      onMouseOut: e => {\n        e.currentTarget.style.transform = 'translateY(0)';\n        e.currentTarget.style.boxShadow = 'none';\n      },\n      children: isLightMode ? 'üåô Dark' : '‚òÄÔ∏è Light'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '2rem',\n        position: 'relative',\n        zIndex: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"link\", {\n        href: \"https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap\",\n        rel: \"stylesheet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          padding: '2rem',\n          minHeight: '100vh',\n          position: 'relative',\n          color: isLightMode ? '#2C1810' : 'white'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            fontSize: '2.8rem',\n            marginBottom: '1rem',\n            fontFamily: 'Playfair Display, serif',\n            fontWeight: '600',\n            letterSpacing: '0.02em',\n            color: isLightMode ? '#E68FAC' : '#FFB6C1',\n            textAlign: 'center',\n            textShadow: isLightMode ? '0 2px 4px rgba(230, 143, 172, 0.3)' : '0 0 15px rgba(255, 182, 193, 0.5)'\n          },\n          children: \"Story Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '250px',\n            height: '2px',\n            background: isLightMode ? 'linear-gradient(to right, transparent, rgba(230, 143, 172, 0.8) 20%, rgba(230, 143, 172, 0.8) 80%, transparent)' : 'linear-gradient(to right, transparent, rgba(255, 255, 255, 0.8) 20%, rgba(255, 255, 255, 0.8) 80%, transparent)',\n            margin: '0 auto 2rem auto',\n            borderRadius: '1px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '1rem',\n            marginBottom: '1rem',\n            justifyContent: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/'),\n            style: {\n              padding: '0.8em 2em',\n              fontSize: '1.1rem',\n              fontFamily: 'Poppins, sans-serif',\n              fontWeight: '500',\n              letterSpacing: '0.05em',\n              backgroundColor: '#87CEEB',\n              color: '#121212',\n              border: 'none',\n              borderRadius: '50px',\n              cursor: 'pointer',\n              transition: 'all 0.3s ease',\n              textTransform: 'uppercase'\n            },\n            onMouseOver: e => {\n              e.currentTarget.style.transform = 'translateY(-2px)';\n              e.currentTarget.style.boxShadow = '0 5px 15px rgba(135, 206, 235, 0.4)';\n            },\n            onMouseOut: e => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = 'none';\n            },\n            children: \"Back to Main\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCreateStory,\n            style: {\n              padding: '0.8em 2em',\n              fontSize: '1.1rem',\n              fontFamily: 'Poppins, sans-serif',\n              fontWeight: '500',\n              letterSpacing: '0.05em',\n              backgroundColor: '#FFB6C1',\n              color: '#121212',\n              border: 'none',\n              borderRadius: '50px',\n              cursor: 'pointer',\n              transition: 'all 0.3s ease',\n              textTransform: 'uppercase'\n            },\n            onMouseOver: e => {\n              e.currentTarget.style.transform = 'translateY(-2px)';\n              e.currentTarget.style.boxShadow = '0 5px 15px rgba(255, 182, 193, 0.4)';\n            },\n            onMouseOut: e => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = 'none';\n            },\n            children: \"Create Story\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleDeleteClick,\n            style: {\n              padding: '0.8em 2em',\n              fontSize: '1.1rem',\n              fontFamily: 'Poppins, sans-serif',\n              fontWeight: '500',\n              letterSpacing: '0.05em',\n              backgroundColor: isDeleteMode ? '#4682B4' : '#87CEEB',\n              color: '#121212',\n              border: 'none',\n              borderRadius: '50px',\n              cursor: 'pointer',\n              transition: 'all 0.3s ease',\n              textTransform: 'uppercase'\n            },\n            onMouseOver: e => {\n              e.currentTarget.style.transform = 'translateY(-2px)';\n              e.currentTarget.style.boxShadow = `0 5px 15px ${isDeleteMode ? 'rgba(70, 130, 180, 0.4)' : 'rgba(135, 206, 235, 0.4)'}`;\n            },\n            onMouseOut: e => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = 'none';\n            },\n            children: isDeleteMode ? 'Finish Delete' : 'Delete Stories'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...(isSmallScreen ? {\n              position: 'relative',\n              marginBottom: '1rem'\n            } : {\n              position: 'absolute',\n              right: '2rem',\n              top: '11.5rem'\n            }),\n            opacity: 0.7,\n            zIndex: 1000,\n            display: stories.length > 0 ? 'block' : 'none'\n          },\n          children: /*#__PURE__*/_jsxDEV(SortDropdown, {\n            options: sortOptions,\n            value: sortBy,\n            onChange: setSortBy,\n            isLightMode: isLightMode\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'relative',\n            marginTop: '1rem',\n            marginBottom: '2rem',\n            height: isUploading || isAnalyzing || isGeneratingStory ? '40px' : '0',\n            overflow: 'hidden',\n            transition: 'all 0.3s ease'\n          },\n          children: (isUploading || isAnalyzing || isGeneratingStory) && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              gap: '0.5rem',\n              fontFamily: 'Poppins, sans-serif',\n              fontSize: '1.1rem',\n              background: 'linear-gradient(135deg, #FFB6C1, #87CEEB)',\n              WebkitBackgroundClip: 'text',\n              WebkitTextFillColor: 'transparent',\n              textAlign: 'center',\n              letterSpacing: '0.02em',\n              fontWeight: '500',\n              animation: 'fadeInOut 2s infinite'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: isUploading ? 'Uploading your memories' : isAnalyzing ? 'Analyzing your story' : 'Creating your story'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                animation: 'ellipsis 1.5s infinite'\n              },\n              children: \"...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n          children: `\n              @keyframes fadeInOut {\n                0%, 100% { opacity: 0.7; }\n                50% { opacity: 1; }\n              }\n              \n              @keyframes ellipsis {\n                0% { opacity: 0.3; }\n                50% { opacity: 1; }\n                100% { opacity: 0.3; }\n              }\n            `\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          multiple: true,\n          onChange: handleFileSelect,\n          style: {\n            display: 'none'\n          },\n          ref: fileInputRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StoryGrid, {\n          stories: sortedStories,\n          isDeleteMode: isDeleteMode,\n          onStorySelect: handleStorySelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), showDeleteConfirm && /*#__PURE__*/_jsxDEV(DeleteConfirmModal, {\n        count: selectedStories.size,\n        onConfirm: handleConfirmDelete,\n        onCancel: handleCancelDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this), showError && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n        zIndex: 1000,\n        padding: '15px 25px',\n        borderRadius: '12px',\n        background: isLightMode ? 'linear-gradient(135deg, #ff6b6b, #ff8787)' : 'linear-gradient(135deg, #2c3e50, #3498db)',\n        color: '#ffffff',\n        boxShadow: isLightMode ? '0 4px 15px rgba(255, 107, 107, 0.3)' : '0 4px 15px rgba(44, 62, 80, 0.3)',\n        fontFamily: 'Poppins, sans-serif',\n        fontSize: '1rem',\n        fontWeight: '500',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '10px',\n        animation: 'slideDown 0.3s ease-out'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        width: \"20\",\n        height: \"20\",\n        viewBox: \"0 0 24 24\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: \"12\",\n          cy: \"12\",\n          r: \"10\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 646,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n          x1: \"12\",\n          y1: \"8\",\n          x2: \"12\",\n          y2: \"12\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n          x1: \"12\",\n          y1: \"16\",\n          x2: \"12.01\",\n          y2: \"16\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 11\n      }, this), errorMessage]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 611,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 327,\n    columnNumber: 5\n  }, this);\n};\n_s(CreateDiaryPage, \"4imrvB8KNnOK+i/WnL51/cd3748=\", false, function () {\n  return [useNavigate];\n});\n_c = CreateDiaryPage;\nexport default CreateDiaryPage;\nvar _c;\n$RefreshReg$(_c, \"CreateDiaryPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","useNavigate","StoryGrid","DeleteConfirmModal","SortDropdown","uploadImages","getAllStories","deleteStory","getImages","analyzeImagesSequentially","generateStory","createStory","jsxDEV","_jsxDEV","CreateDiaryPage","_s","navigate","showPopup","setShowPopup","isFading","setIsFading","stories","setStories","isUploading","setIsUploading","uploadedImages","setUploadedImages","combinedDescription","setCombinedDescription","isAnalyzing","setIsAnalyzing","isGeneratingStory","setIsGeneratingStory","generatedStory","setGeneratedStory","errorMessage","setErrorMessage","showError","setShowError","fileInputRef","isDeleteMode","setIsDeleteMode","selectedStories","setSelectedStories","Set","windowWidth","setWindowWidth","window","innerWidth","showDeleteConfirm","setShowDeleteConfirm","sortBy","setSortBy","isLightMode","setIsLightMode","savedMode","localStorage","getItem","JSON","parse","glitterContainer","sortOptions","label","value","sortedStories","sorted","sort","a","b","Date","createdAt","getTime","title","localeCompare","fetchStories","fetchImages","handleResize","addEventListener","removeEventListener","createSingleGlitter","_glitterContainer$cur","glitter","document","createElement","size","Math","random","startX","duration","style","cssText","current","appendChild","remove","i","setTimeout","interval","setInterval","clearInterval","setItem","stringify","body","backgroundColor","errorTimer","clearTimeout","fetchedStories","error","console","images","log","fadeTimer","hideTimer","handleCreateStory","_fileInputRef$current","click","handleFileSelect","event","files","target","length","Array","from","description","storyResult","story","imageUrls","map","img","image_path","storyId","story_id","handleStorySelect","prev","newSelected","has","delete","add","handleDeleteClick","handleConfirmDelete","failedDeletions","updated","filter","id","push","alert","handleCancelDelete","isSmallScreen","position","minHeight","transition","children","innerHeight","fileName","_jsxFileName","lineNumber","columnNumber","ref","className","onClick","top","right","padding","fontSize","fontFamily","fontWeight","letterSpacing","color","border","borderRadius","cursor","zIndex","display","alignItems","gap","onMouseOver","e","currentTarget","transform","boxShadow","onMouseOut","href","rel","flexDirection","marginBottom","textAlign","textShadow","width","height","background","margin","justifyContent","textTransform","opacity","options","onChange","marginTop","overflow","WebkitBackgroundClip","WebkitTextFillColor","animation","type","accept","multiple","onStorySelect","count","onConfirm","onCancel","left","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","x1","y1","x2","y2","_c","$RefreshReg$"],"sources":["/Users/hyunjunekim/Documents/GitHub/moment4u/src/pages/CreateDiaryPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport '../styles/global.css';\nimport { useNavigate } from 'react-router-dom';\nimport StoryGrid from '../components/StoryGrid';\nimport DeleteConfirmModal from '../components/DeleteConfirmModal';\nimport SortDropdown from '../components/SortDropdown';\nimport { \n  uploadImages, \n  getAllStories, \n  deleteStory, \n  Story, \n  ImageResponse, \n  getImages, \n  analyzeImagesSequentially,\n  generateStory,\n  StoryGenerationResponse,\n  createStory \n} from '../services/api';\n\nconst CreateDiaryPage: React.FC = () => {\n  const navigate = useNavigate();\n  const [showPopup, setShowPopup] = useState(false);\n  const [isFading, setIsFading] = useState(false);\n  const [stories, setStories] = useState<Story[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadedImages, setUploadedImages] = useState<ImageResponse[]>([]);\n  const [combinedDescription, setCombinedDescription] = useState<string>('');\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [isGeneratingStory, setIsGeneratingStory] = useState(false);\n  const [generatedStory, setGeneratedStory] = useState<StoryGenerationResponse | null>(null);\n  const [errorMessage, setErrorMessage] = useState<string>('');\n  const [showError, setShowError] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [isDeleteMode, setIsDeleteMode] = useState(false);\n  const [selectedStories, setSelectedStories] = useState<Set<string>>(new Set());\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [sortBy, setSortBy] = useState('date-desc');\n  const [isLightMode, setIsLightMode] = useState(() => {\n    const savedMode = localStorage.getItem('isLightMode');\n    return savedMode ? JSON.parse(savedMode) : false;\n  });\n  const glitterContainer = useRef<HTMLDivElement>(null);\n\n  const sortOptions = [\n    { label: 'Newest', value: 'date-desc' },\n    { label: 'Oldest', value: 'date-asc' },\n    { label: 'A-Z', value: 'title-asc' },\n    { label: 'Z-A', value: 'title-desc' },\n  ];\n\n  const sortedStories = useMemo(() => {\n    const sorted = [...stories];\n    switch (sortBy) {\n      case 'date-desc':\n        return sorted.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n      case 'date-asc':\n        return sorted.sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n      case 'title-asc':\n        return sorted.sort((a, b) => (a.title || '').localeCompare(b.title || ''));\n      case 'title-desc':\n        return sorted.sort((a, b) => (b.title || '').localeCompare(a.title || ''));\n      default:\n        return sorted;\n    }\n  }, [stories, sortBy]);\n\n  useEffect(() => {\n    fetchStories();\n    fetchImages();\n  }, []);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  useEffect(() => {\n    const createSingleGlitter = () => {\n      const glitter = document.createElement('div');\n      const size = Math.random() * 15 + 5;\n      const startX = Math.random() * window.innerWidth;\n      const duration = Math.random() * 3 + 2;\n\n      glitter.style.cssText = `\n        position: absolute;\n        width: ${size}px;\n        height: ${size}px;\n        background: ${isLightMode ? \n          'radial-gradient(circle at 30% 30%, #FFD700, #FFA500)' : \n          'radial-gradient(circle at 30% 30%, #FFB6C1, #87CEEB)'};\n        opacity: ${isLightMode ? '0.4' : '0.2'};\n        border-radius: 50%;\n        pointer-events: none;\n        bottom: -${size}px;\n        left: ${startX}px;\n        animation: glitterFloat ${duration}s linear;\n      `;\n\n      glitterContainer.current?.appendChild(glitter);\n\n      glitter.addEventListener('animationend', () => {\n        glitter.remove();\n      });\n    };\n\n    // Create initial batch - reduced from 30 to 15\n    for (let i = 0; i < 15; i++) {\n      setTimeout(createSingleGlitter, Math.random() * 3000);\n    }\n\n    // Continuously create new glitters - reduced frequency from 300ms to 800ms\n    const interval = setInterval(() => {\n      createSingleGlitter();\n    }, 800);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [isLightMode]);\n\n  useEffect(() => {\n    localStorage.setItem('isLightMode', JSON.stringify(isLightMode));\n    document.body.style.backgroundColor = isLightMode ? '#faf4f7' : '#121212';\n  }, [isLightMode]);\n\n  useEffect(() => {\n    let errorTimer: NodeJS.Timeout;\n    \n    if (showError) {\n      errorTimer = setTimeout(() => {\n        setShowError(false);\n        setErrorMessage('');\n      }, 3000);\n    }\n\n    return () => {\n      clearTimeout(errorTimer);\n    };\n  }, [showError]);\n\n  const fetchStories = async () => {\n    try {\n      const fetchedStories = await getAllStories();\n      setStories(fetchedStories);\n    } catch (error) {\n      console.error('Failed to fetch stories:', error);\n    }\n  };\n\n  const fetchImages = async () => {\n    try {\n      const images = await getImages();\n      setUploadedImages(images);\n      console.log('Fetched images:', images);\n    } catch (error) {\n      console.error('Failed to fetch images:', error);\n    }\n  };\n\n  useEffect(() => {\n    let fadeTimer: NodeJS.Timeout;\n    let hideTimer: NodeJS.Timeout;\n    \n    if (showPopup) {\n      // Start fade out after 1.7 seconds\n      fadeTimer = setTimeout(() => {\n        setIsFading(true);\n      }, 1700);\n\n      // Hide popup after fade out animation (2 seconds + 0.3 seconds for fade out)\n      hideTimer = setTimeout(() => {\n        setShowPopup(false);\n        setIsFading(false);\n      }, 2000);\n    }\n\n    return () => {\n      clearTimeout(fadeTimer);\n      clearTimeout(hideTimer);\n    };\n  }, [showPopup]);\n\n  const handleCreateStory = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    if (files.length > 4) {\n      setErrorMessage('You can only upload up to 4 images at once');\n      setShowError(true);\n      if (event.target) {\n        event.target.value = ''; // Reset file input\n      }\n      return;\n    }\n\n    try {\n      setIsUploading(true);\n      const uploadedImages = await uploadImages(Array.from(files));\n      console.log('Successfully uploaded images:', uploadedImages);\n      setUploadedImages(uploadedImages);\n\n      // Start analyzing images\n      setIsAnalyzing(true);\n      const description = await analyzeImagesSequentially(uploadedImages);\n      setCombinedDescription(description);\n      setIsAnalyzing(false);\n\n      // Generate story\n      setIsGeneratingStory(true);\n      const storyResult = await generateStory(description);\n      setGeneratedStory(storyResult);\n      setIsGeneratingStory(false);\n\n      // Save the story\n      if (storyResult.title && storyResult.story && uploadedImages.length > 0) {\n        const imageUrls = uploadedImages.map(img => img.image_path);\n        const storyId = uploadedImages[0].story_id;\n        await createStory(storyResult.title, storyResult.story, imageUrls, storyId);\n        console.log('Story saved successfully!');\n        \n        // Refresh the stories list after successful creation\n        await fetchStories();\n      }\n    } catch (error) {\n      console.error('Failed to generate story:', error);\n      setErrorMessage('An error occurred while processing your images');\n      setShowError(true);\n    } finally {\n      setIsUploading(false);\n      if (event.target) {\n        event.target.value = ''; // Reset file input\n      }\n    }\n  };\n\n  const handleStorySelect = (storyId: string) => {\n    setSelectedStories(prev => {\n      const newSelected = new Set(prev);\n      if (newSelected.has(storyId)) {\n        newSelected.delete(storyId);\n      } else {\n        newSelected.add(storyId);\n      }\n      return newSelected;\n    });\n  };\n\n  const handleDeleteClick = async () => {\n    if (isDeleteMode) {\n      // If already in delete mode, check if there are stories to delete\n      if (selectedStories.size > 0) {\n        setShowDeleteConfirm(true);\n      } else {\n        // If no stories selected, just exit delete mode\n        setIsDeleteMode(false);\n      }\n    } else {\n      // Enter delete mode\n      setIsDeleteMode(true);\n      setSelectedStories(new Set());\n    }\n  };\n\n  const handleConfirmDelete = async () => {\n    try {\n      // Create an array to track failed deletions\n      const failedDeletions: string[] = [];\n      \n      // Log the stories we're about to delete\n      console.log('Selected stories for deletion:', Array.from(selectedStories));\n      console.log('Current stories:', stories);\n      \n      // Delete stories one by one to handle errors individually\n      for (const storyId of Array.from(selectedStories)) {\n        try {\n          console.log('Attempting to delete story with ID:', storyId);\n          await deleteStory(storyId);\n          console.log('Successfully deleted story from API:', storyId);\n          \n          // Update stories list immediately after successful deletion\n          setStories(prev => {\n            console.log('Updating stories list after deletion. Current:', prev);\n            const updated = prev.filter(story => story.id !== storyId);\n            console.log('Updated stories list:', updated);\n            return updated;\n          });\n        } catch (error) {\n          console.error(`Failed to delete story ${storyId}:`, error);\n          failedDeletions.push(storyId);\n        }\n      }\n      \n      // Show error message if any deletions failed\n      if (failedDeletions.length > 0) {\n        alert(`Failed to delete ${failedDeletions.length} stories. Please try again later.`);\n      }\n      \n      // Refresh the stories list from the server\n      await fetchStories();\n    } catch (error) {\n      console.error('Error in delete operation:', error);\n      alert('An error occurred while deleting stories. Please try again.');\n    }\n\n    // Clear selected stories and exit delete mode\n    setSelectedStories(new Set());\n    setIsDeleteMode(false);\n    setShowDeleteConfirm(false);\n  };\n\n  const handleCancelDelete = () => {\n    setShowDeleteConfirm(false);\n  };\n\n  const isSmallScreen = windowWidth < 1100;\n\n  return (\n    <div style={{ \n      position: 'relative', \n      minHeight: '100vh',\n      backgroundColor: isLightMode ? '#faf4f7' : '#121212',\n      transition: 'background-color 0.3s ease'\n    }}>\n      <style>\n        {`\n          @keyframes glitterFloat {\n            0% {\n              transform: translateY(0) rotate(0deg);\n              opacity: ${isLightMode ? 0.4 : 0.2};\n            }\n            50% {\n              opacity: ${isLightMode ? 0.6 : 0.3};\n            }\n            100% {\n              transform: translateY(-${window.innerHeight}px) rotate(360deg);\n              opacity: 0;\n            }\n          }\n        `}\n      </style>\n      <div ref={glitterContainer} className=\"glitter-container\" />\n      <button\n        onClick={() => setIsLightMode((prev: boolean) => !prev)}\n        style={{\n          position: 'absolute',\n          top: '20px',\n          right: '20px',\n          padding: '0.6em 1.2em',\n          fontSize: '0.9rem',\n          fontFamily: 'Poppins, sans-serif',\n          fontWeight: '500',\n          letterSpacing: '0.05em',\n          backgroundColor: isLightMode ? '#E68FAC' : 'transparent',\n          color: isLightMode ? 'white' : '#FFB6C1',\n          border: `2px solid ${isLightMode ? 'transparent' : '#FFB6C1'}`,\n          borderRadius: '50px',\n          cursor: 'pointer',\n          transition: 'all 0.3s ease',\n          zIndex: 1000,\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem'\n        }}\n        onMouseOver={(e) => {\n          e.currentTarget.style.transform = 'translateY(-2px)';\n          e.currentTarget.style.boxShadow = `0 5px 15px ${isLightMode ? 'rgba(230, 143, 172, 0.4)' : 'rgba(255, 182, 193, 0.2)'}`;\n        }}\n        onMouseOut={(e) => {\n          e.currentTarget.style.transform = 'translateY(0)';\n          e.currentTarget.style.boxShadow = 'none';\n        }}\n      >\n        {isLightMode ? 'üåô Dark' : '‚òÄÔ∏è Light'}\n      </button>\n      <div style={{\n        padding: '2rem',\n        position: 'relative',\n        zIndex: 2\n      }}>\n        <link href=\"https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap\" rel=\"stylesheet\" />\n        <div style={{\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          padding: '2rem',\n          minHeight: '100vh',\n          position: 'relative',\n          color: isLightMode ? '#2C1810' : 'white'\n        }}>\n          <h1 style={{\n            fontSize: '2.8rem',\n            marginBottom: '1rem',\n            fontFamily: 'Playfair Display, serif',\n            fontWeight: '600',\n            letterSpacing: '0.02em',\n            color: isLightMode ? '#E68FAC' : '#FFB6C1',\n            textAlign: 'center',\n            textShadow: isLightMode ? \n              '0 2px 4px rgba(230, 143, 172, 0.3)' : \n              '0 0 15px rgba(255, 182, 193, 0.5)'\n          }}>\n            Story Dashboard\n          </h1>\n          <div style={{\n            width: '250px',\n            height: '2px',\n            background: isLightMode ?\n              'linear-gradient(to right, transparent, rgba(230, 143, 172, 0.8) 20%, rgba(230, 143, 172, 0.8) 80%, transparent)' :\n              'linear-gradient(to right, transparent, rgba(255, 255, 255, 0.8) 20%, rgba(255, 255, 255, 0.8) 80%, transparent)',\n            margin: '0 auto 2rem auto',\n            borderRadius: '1px'\n          }} />\n\n          <div style={{\n            display: 'flex',\n            gap: '1rem',\n            marginBottom: '1rem',\n            justifyContent: 'center'\n          }}>\n            <button\n              onClick={() => navigate('/')}\n              style={{\n                padding: '0.8em 2em',\n                fontSize: '1.1rem',\n                fontFamily: 'Poppins, sans-serif',\n                fontWeight: '500',\n                letterSpacing: '0.05em',\n                backgroundColor: '#87CEEB',\n                color: '#121212',\n                border: 'none',\n                borderRadius: '50px',\n                cursor: 'pointer',\n                transition: 'all 0.3s ease',\n                textTransform: 'uppercase'\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.transform = 'translateY(-2px)';\n                e.currentTarget.style.boxShadow = '0 5px 15px rgba(135, 206, 235, 0.4)';\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.transform = 'translateY(0)';\n                e.currentTarget.style.boxShadow = 'none';\n              }}\n            >\n              Back to Main\n            </button>\n\n            <button\n              onClick={handleCreateStory}\n              style={{\n                padding: '0.8em 2em',\n                fontSize: '1.1rem',\n                fontFamily: 'Poppins, sans-serif',\n                fontWeight: '500',\n                letterSpacing: '0.05em',\n                backgroundColor: '#FFB6C1',\n                color: '#121212',\n                border: 'none',\n                borderRadius: '50px',\n                cursor: 'pointer',\n                transition: 'all 0.3s ease',\n                textTransform: 'uppercase'\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.transform = 'translateY(-2px)';\n                e.currentTarget.style.boxShadow = '0 5px 15px rgba(255, 182, 193, 0.4)';\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.transform = 'translateY(0)';\n                e.currentTarget.style.boxShadow = 'none';\n              }}\n            >\n              Create Story\n            </button>\n\n            <button\n              onClick={handleDeleteClick}\n              style={{\n                padding: '0.8em 2em',\n                fontSize: '1.1rem',\n                fontFamily: 'Poppins, sans-serif',\n                fontWeight: '500',\n                letterSpacing: '0.05em',\n                backgroundColor: isDeleteMode ? '#4682B4' : '#87CEEB',\n                color: '#121212',\n                border: 'none',\n                borderRadius: '50px',\n                cursor: 'pointer',\n                transition: 'all 0.3s ease',\n                textTransform: 'uppercase'\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.transform = 'translateY(-2px)';\n                e.currentTarget.style.boxShadow = `0 5px 15px ${isDeleteMode ? 'rgba(70, 130, 180, 0.4)' : 'rgba(135, 206, 235, 0.4)'}`;\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.transform = 'translateY(0)';\n                e.currentTarget.style.boxShadow = 'none';\n              }}\n            >\n              {isDeleteMode ? 'Finish Delete' : 'Delete Stories'}\n            </button>\n          </div>\n\n          <div style={{\n            ...(isSmallScreen ? {\n              position: 'relative',\n              marginBottom: '1rem'\n            } : {\n              position: 'absolute',\n              right: '2rem',\n              top: '11.5rem'\n            }),\n            opacity: 0.7,\n            zIndex: 1000,\n            display: stories.length > 0 ? 'block' : 'none'\n          }}>\n            <SortDropdown\n              options={sortOptions}\n              value={sortBy}\n              onChange={setSortBy}\n              isLightMode={isLightMode}\n            />\n          </div>\n\n          <div style={{\n            position: 'relative',\n            marginTop: '1rem',\n            marginBottom: '2rem',\n            height: (isUploading || isAnalyzing || isGeneratingStory) ? '40px' : '0',\n            overflow: 'hidden',\n            transition: 'all 0.3s ease'\n          }}>\n            {(isUploading || isAnalyzing || isGeneratingStory) && (\n              <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '0.5rem',\n                fontFamily: 'Poppins, sans-serif',\n                fontSize: '1.1rem',\n                background: 'linear-gradient(135deg, #FFB6C1, #87CEEB)',\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                textAlign: 'center',\n                letterSpacing: '0.02em',\n                fontWeight: '500',\n                animation: 'fadeInOut 2s infinite'\n              }}>\n                <span>\n                  {isUploading ? 'Uploading your memories' : \n                   isAnalyzing ? 'Analyzing your story' : \n                   'Creating your story'}\n                </span>\n                <span style={{ animation: 'ellipsis 1.5s infinite' }}>...</span>\n              </div>\n            )}\n          </div>\n\n          <style>\n            {`\n              @keyframes fadeInOut {\n                0%, 100% { opacity: 0.7; }\n                50% { opacity: 1; }\n              }\n              \n              @keyframes ellipsis {\n                0% { opacity: 0.3; }\n                50% { opacity: 1; }\n                100% { opacity: 0.3; }\n              }\n            `}\n          </style>\n\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            multiple\n            onChange={handleFileSelect}\n            style={{ display: 'none' }}\n            ref={fileInputRef}\n          />\n          \n          <StoryGrid\n            stories={sortedStories}\n            isDeleteMode={isDeleteMode}\n            onStorySelect={handleStorySelect}\n          />\n        </div>\n\n        {showDeleteConfirm && (\n          <DeleteConfirmModal\n            count={selectedStories.size}\n            onConfirm={handleConfirmDelete}\n            onCancel={handleCancelDelete}\n          />\n        )}\n      </div>\n\n      {/* Error Message Popup */}\n      {showError && (\n        <div\n          style={{\n            position: 'fixed',\n            top: '20px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            zIndex: 1000,\n            padding: '15px 25px',\n            borderRadius: '12px',\n            background: isLightMode \n              ? 'linear-gradient(135deg, #ff6b6b, #ff8787)'\n              : 'linear-gradient(135deg, #2c3e50, #3498db)',\n            color: '#ffffff',\n            boxShadow: isLightMode\n              ? '0 4px 15px rgba(255, 107, 107, 0.3)'\n              : '0 4px 15px rgba(44, 62, 80, 0.3)',\n            fontFamily: 'Poppins, sans-serif',\n            fontSize: '1rem',\n            fontWeight: '500',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '10px',\n            animation: 'slideDown 0.3s ease-out',\n          }}\n        >\n          <svg\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          >\n            <circle cx=\"12\" cy=\"12\" r=\"10\" />\n            <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" />\n            <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" />\n          </svg>\n          {errorMessage}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CreateDiaryPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}